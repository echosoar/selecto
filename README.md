# Selecto

ä¸€ä¸ªå¼ºå¤§çš„ macOS åˆ’è¯å¢å¼ºå·¥å…· / A powerful macOS text selection enhancement tool

[English](#english) | [ä¸­æ–‡](#ä¸­æ–‡)

## ä¸­æ–‡

### ç®€ä»‹

Selecto æ˜¯ä¸€ä¸ªä½¿ç”¨ Swift å¼€å‘çš„ macOS åº”ç”¨ç¨‹åºï¼Œå½“ç”¨æˆ·é€‰ä¸­ä¸€æ®µæ–‡æœ¬æ—¶ï¼Œä¼šåœ¨æ–‡æœ¬ä¸Šæ–¹è‡ªåŠ¨æ˜¾ç¤ºä¸€ä¸ªæµ®åŠ¨å·¥å…·æ ï¼Œæä¾›å¤šç§å¯è‡ªå®šä¹‰çš„åŠŸèƒ½ã€‚

### ä¸»è¦ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½æ–‡æœ¬é€‰æ‹©ç›‘æ§** - è‡ªåŠ¨æ£€æµ‹ç³»ç»ŸèŒƒå›´å†…çš„æ–‡æœ¬é€‰æ‹©
- ğŸ› ï¸ **æµ®åŠ¨å·¥å…·æ ** - åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹æ˜¾ç¤ºä¼˜é›…çš„æµ®åŠ¨å·¥å…·æ 
- âš™ï¸ **é«˜åº¦å¯å®šåˆ¶** - é€šè¿‡è®¾ç½®ç•Œé¢é…ç½®å„ç§åŠ¨ä½œå’Œè§¦å‘æ¡ä»¶
- ğŸ” **æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ** - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç‰¹å®šæ–‡æœ¬æ¨¡å¼
- ğŸ“‹ **ç²¾é€‰åŠ¨ä½œç±»å‹** - ä»…ä¿ç•™æ‰“å¼€é“¾æ¥ä¸è¿è¡Œè„šæœ¬ä¸¤ç§æ ¸å¿ƒåŠ¨ä½œ
- ğŸ“ **å†…ç½®è„šæœ¬ç¼–è¾‘å™¨** - åœ¨è®¾ç½®ä¸­ç›´æ¥ç¼–å†™å¹¶ä¿å­˜ Shell è„šæœ¬
- ğŸ”’ **æƒé™ç®¡ç†** - è‡ªåŠ¨æ£€æŸ¥å¹¶è¯·æ±‚å¿…è¦çš„ç³»ç»Ÿæƒé™
- ğŸ¨ **ç°ä»£åŒ– UI** - ä½¿ç”¨ SwiftUI æ„å»ºçš„ç¾è§‚è®¾ç½®ç•Œé¢

### åŠŸèƒ½åˆ—è¡¨

#### å†…ç½®åŠ¨ä½œç±»å‹

1. **æ‰“å¼€é“¾æ¥** - åŸºäº URL æ¨¡æ¿åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é€‰ä¸­æ–‡æœ¬
2. **è¿è¡Œè„šæœ¬** - ç›´æ¥ç¼–å†™ Shell è„šæœ¬å¹¶åœ¨å·¥å…·æ æŸ¥çœ‹è¾“å‡º

#### é«˜çº§åŠŸèƒ½

- **æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…** - è®¾ç½®è§¦å‘æ¡ä»¶ï¼Œåªåœ¨ç‰¹å®šæ–‡æœ¬æ¨¡å¼ä¸‹æ˜¾ç¤ºåŠ¨ä½œ
- **åŠ¨ä½œæ’åº** - è‡ªå®šä¹‰å·¥å…·æ ä¸­åŠ¨ä½œçš„æ˜¾ç¤ºé¡ºåº
- **å¯ç”¨/ç¦ç”¨** - çµæ´»æ§åˆ¶æ¯ä¸ªåŠ¨ä½œçš„å¯ç”¨çŠ¶æ€
- **å‚æ•°åŒ–é…ç½®** - ä¸ºåŠ¨ä½œè®¾ç½® URL æ¨¡æ¿ã€è„šæœ¬è·¯å¾„ç­‰å‚æ•°

### ç³»ç»Ÿè¦æ±‚

- macOS 10.15 (Catalina) æˆ–æ›´é«˜ç‰ˆæœ¬
- Xcode 14.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆä»…ç”¨äºæ„å»ºï¼‰

### æƒé™è¦æ±‚

Selecto éœ€è¦ä»¥ä¸‹ç³»ç»Ÿæƒé™æ‰èƒ½æ­£å¸¸å·¥ä½œï¼š

1. **è¾…åŠ©åŠŸèƒ½ (Accessibility)** - ç”¨äºç›‘æ§æ–‡æœ¬é€‰æ‹©äº‹ä»¶
2. **å±å¹•å½•åˆ¶ (Screen Recording)** - ç”¨äºè·å–é€‰ä¸­æ–‡æœ¬çš„ä½ç½®ä¿¡æ¯ï¼ˆmacOS 10.15+ï¼‰

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨å¼•å¯¼æ‚¨æˆäºˆè¿™äº›æƒé™ã€‚

### å®‰è£…ä¸ä½¿ç”¨

#### ä» Release ä¸‹è½½ï¼ˆæ¨èï¼‰

è®¿é—® [Releases é¡µé¢](https://github.com/echosoar/selecto/releases) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ DMG æ–‡ä»¶ï¼š

- **Universal (é€šç”¨ç‰ˆ)** - æ”¯æŒ Apple Silicon (M1/M2/M3) å’Œ Intel èŠ¯ç‰‡
- **ARM64** - ä»…æ”¯æŒ Apple Silicon (M1/M2/M3)
- **x86_64** - ä»…æ”¯æŒ Intel èŠ¯ç‰‡

ä¸‹è½½ååŒå‡» DMG æ–‡ä»¶ï¼Œå°† Selecto.app æ‹–åˆ° Applications æ–‡ä»¶å¤¹å³å¯ã€‚

#### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/echosoar/selecto.git
cd selecto

# ä½¿ç”¨ Xcode æ‰“å¼€é¡¹ç›®
open Selecto/Selecto.xcodeproj

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œæ„å»º
xcodebuild -project Selecto/Selecto.xcodeproj -scheme Selecto -configuration Release
```

#### åŸºæœ¬ä½¿ç”¨

1. å¯åŠ¨ Selecto åº”ç”¨
2. æˆäºˆå¿…è¦çš„ç³»ç»Ÿæƒé™
3. åœ¨ä»»ä½•åº”ç”¨ä¸­é€‰ä¸­ä¸€æ®µæ–‡æœ¬
4. å·¥å…·æ ä¼šè‡ªåŠ¨å‡ºç°åœ¨é€‰ä¸­æ–‡æœ¬ä¸Šæ–¹
5. ç‚¹å‡»å·¥å…·æ ä¸­çš„æŒ‰é’®æ‰§è¡Œç›¸åº”åŠ¨ä½œ

#### é…ç½®åŠ¨ä½œ

1. ç‚¹å‡»èœå•æ ä¸­çš„ Selecto å›¾æ ‡
2. é€‰æ‹©"è®¾ç½® (Settings)"
3. åœ¨è®¾ç½®ç•Œé¢ä¸­ï¼š
   - æ·»åŠ æ–°åŠ¨ä½œ
   - ç¼–è¾‘ç°æœ‰åŠ¨ä½œ
   - é…ç½®åŒ¹é…æ¡ä»¶ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
   - è®¾ç½®åŠ¨ä½œå‚æ•°
   - è°ƒæ•´åŠ¨ä½œé¡ºåº

### é¡¹ç›®ç»“æ„

```
Selecto/
â”œâ”€â”€ AppDelegate.swift           # åº”ç”¨ç¨‹åºä¸»ä»£ç†
â”œâ”€â”€ SelectionMonitor.swift      # æ–‡æœ¬é€‰æ‹©ç›‘æ§å™¨
â”œâ”€â”€ ToolbarWindowController.swift  # å·¥å…·æ çª—å£æ§åˆ¶å™¨
â”œâ”€â”€ ToolbarView.swift           # å·¥å…·æ è§†å›¾
â”œâ”€â”€ SettingsWindowController.swift # è®¾ç½®çª—å£æ§åˆ¶å™¨
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ ActionItem.swift        # åŠ¨ä½œæ•°æ®æ¨¡å‹
â”œâ”€â”€ Managers/
â”‚   â”œâ”€â”€ ActionManager.swift     # åŠ¨ä½œç®¡ç†å™¨
â”‚   â”œâ”€â”€ ActionExecutor.swift    # åŠ¨ä½œæ‰§è¡Œå™¨
â”‚   â””â”€â”€ PermissionManager.swift # æƒé™ç®¡ç†å™¨
â””â”€â”€ Views/
    â””â”€â”€ SettingsView.swift      # SwiftUI è®¾ç½®è§†å›¾
```

### æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Swift 5.7+
- **æ¡†æ¶**: 
  - AppKit (ä¸»åº”ç”¨æ¡†æ¶)
  - SwiftUI (è®¾ç½®ç•Œé¢)
  - ApplicationServices (è¾…åŠ©åŠŸèƒ½ API)
- **æ¶æ„æ¨¡å¼**: MVC + MVVM (è®¾ç½®ç•Œé¢)

### æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬çš„ç»„åˆï¼Œå¹³è¡¡å“åº”é€Ÿåº¦å’Œ CPU ä½¿ç”¨ç‡
- é«˜æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç®—æ³•
- æœ€å°åŒ–ä¸»çº¿ç¨‹é˜»å¡
- æ™ºèƒ½çš„å·¥å…·æ è‡ªåŠ¨éšè—æœºåˆ¶

### ä»£ç è´¨é‡

- å®Œæ•´çš„ä¸­è‹±åŒè¯­æ³¨é‡Š
- æ¸…æ™°çš„ä»£ç ç»“æ„å’Œå‘½åè§„èŒƒ
- éµå¾ª Swift æœ€ä½³å®è·µ
- è‰¯å¥½çš„é”™è¯¯å¤„ç†

### è‡ªåŠ¨åŒ–å‘å¸ƒ

é¡¹ç›®ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒæµç¨‹ï¼š

- âœ… **è‡ªåŠ¨è§¦å‘** - main åˆ†æ”¯æœ‰æ–°æäº¤æ—¶è‡ªåŠ¨è§¦å‘æ„å»º
- ğŸ—ï¸ **å¤šæ¶æ„æ”¯æŒ** - è‡ªåŠ¨æ„å»º ARM64ã€x86_64 å’Œé€šç”¨äºŒè¿›åˆ¶ç‰ˆæœ¬
- ğŸ“¦ **DMG æ‰“åŒ…** - è‡ªåŠ¨ç”Ÿæˆä¸‰ä¸ªç‰ˆæœ¬çš„ DMG å®‰è£…åŒ…
- ğŸ”¢ **ç‰ˆæœ¬ç®¡ç†** - ä» 0.1.0 å¼€å§‹è‡ªåŠ¨é€’å¢ patch ç‰ˆæœ¬å·
- ğŸš€ **è‡ªåŠ¨å‘å¸ƒ** - æ„å»ºå®Œæˆåè‡ªåŠ¨åˆ›å»º GitHub Release

æ¯æ¬¡æ¨é€åˆ° main åˆ†æ”¯æ—¶ï¼ŒCI/CD æµç¨‹ä¼šï¼š
1. è‡ªåŠ¨è®¡ç®—ä¸‹ä¸€ä¸ªç‰ˆæœ¬å·ï¼ˆå¦‚ 0.1.0 â†’ 0.1.1ï¼‰
2. æ›´æ–°é¡¹ç›®æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·
3. æ„å»ºä¸‰ç§æ¶æ„çš„åº”ç”¨ç¨‹åºï¼ˆUniversalã€ARM64ã€x86_64ï¼‰
4. åˆ›å»ºå¯¹åº”çš„ DMG å®‰è£…åŒ…
5. å‘å¸ƒåˆ° GitHub Releases å¹¶é™„å¸¦æ‰€æœ‰ DMG æ–‡ä»¶

---

## English

### Introduction

Selecto is a macOS application developed in Swift that automatically displays a floating toolbar above selected text, providing various customizable functions.

### Key Features

- ğŸ¯ **Smart Text Selection Monitoring** - Automatically detects system-wide text selection
- ğŸ› ï¸ **Floating Toolbar** - Displays an elegant floating toolbar above selected text
- âš™ï¸ **Highly Customizable** - Configure various actions and trigger conditions through settings
- ğŸ” **Regular Expression Support** - Match specific text patterns using regex
- ğŸ“‹ **Curated Action Types** - Focused on opening links and running custom scripts
- ğŸ“ **Built-in Script Editor** - Author and store shell scripts right inside settings
- ğŸ”’ **Permission Management** - Automatically checks and requests necessary system permissions
- ğŸ¨ **Modern UI** - Beautiful settings interface built with SwiftUI

### Features

#### Built-in Action Types

1. **Open Link** - Launch a browser using flexible URL templates
2. **Run Script** - Author shell scripts inline and inspect output immediately

#### Advanced Features

- **Regular Expression Matching** - Set trigger conditions to show actions only for specific text patterns
- **Action Sorting** - Customize the display order of actions in the toolbar
- **Enable/Disable** - Flexibly control the enabled state of each action
- **Parameterized Configuration** - Set URL templates, script paths, and other parameters for actions

### System Requirements

- macOS 10.15 (Catalina) or later
- Xcode 14.0 or later (for building only)

### Permission Requirements

Selecto requires the following system permissions to function properly:

1. **Accessibility** - To monitor text selection events
2. **Screen Recording** - To get the position of selected text (macOS 10.15+)

On first run, the app will automatically guide you to grant these permissions.

### Installation & Usage

#### Download from Releases (Recommended)

Visit the [Releases page](https://github.com/echosoar/selecto/releases) to download the latest DMG file:

- **Universal** - Supports both Apple Silicon (M1/M2/M3) and Intel chips
- **ARM64** - Apple Silicon (M1/M2/M3) only
- **x86_64** - Intel chips only

After downloading, double-click the DMG file and drag Selecto.app to the Applications folder.

#### Build from Source

```bash
# Clone the repository
git clone https://github.com/echosoar/selecto.git
cd selecto

# Open project with Xcode
open Selecto/Selecto.xcodeproj

# Or build with command line
xcodebuild -project Selecto/Selecto.xcodeproj -scheme Selecto -configuration Release
```

#### Basic Usage

1. Launch the Selecto app
2. Grant necessary system permissions
3. Select text in any application
4. The toolbar will automatically appear above the selected text
5. Click buttons in the toolbar to execute corresponding actions

#### Configure Actions

1. Click the Selecto icon in the menu bar
2. Select "Settings"
3. In the settings interface:
   - Add new actions
   - Edit existing actions
   - Configure match conditions (regular expressions)
   - Set action parameters
   - Adjust action order

### Project Structure

```
Selecto/
â”œâ”€â”€ AppDelegate.swift           # Main application delegate
â”œâ”€â”€ SelectionMonitor.swift      # Text selection monitor
â”œâ”€â”€ ToolbarWindowController.swift  # Toolbar window controller
â”œâ”€â”€ ToolbarView.swift           # Toolbar view
â”œâ”€â”€ SettingsWindowController.swift # Settings window controller
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ ActionItem.swift        # Action data model
â”œâ”€â”€ Managers/
â”‚   â”œâ”€â”€ ActionManager.swift     # Action manager
â”‚   â”œâ”€â”€ ActionExecutor.swift    # Action executor
â”‚   â””â”€â”€ PermissionManager.swift # Permission manager
â””â”€â”€ Views/
    â””â”€â”€ SettingsView.swift      # SwiftUI settings view
```

### Technology Stack

- **Language**: Swift 5.7+
- **Frameworks**: 
  - AppKit (main application framework)
  - SwiftUI (settings interface)
  - ApplicationServices (Accessibility API)
- **Architecture**: MVC + MVVM (settings interface)

### Performance Optimization

- Balanced response speed and CPU usage using a combination of timers and event listeners
- Efficient regular expression matching algorithm
- Minimized main thread blocking
- Smart toolbar auto-hide mechanism

### Code Quality

- Complete bilingual (Chinese/English) comments
- Clear code structure and naming conventions
- Follows Swift best practices
- Good error handling

### Automated Release

The project uses GitHub Actions for automated build and release workflow:

- âœ… **Auto-trigger** - Automatically triggers build on new commits to main branch
- ğŸ—ï¸ **Multi-architecture** - Automatically builds ARM64, x86_64, and Universal binaries
- ğŸ“¦ **DMG Packaging** - Automatically generates three versions of DMG installers
- ğŸ”¢ **Version Management** - Auto-increments patch version starting from 0.1.0
- ğŸš€ **Auto Release** - Automatically creates GitHub Release after build

Every push to the main branch triggers the CI/CD pipeline to:
1. Automatically calculate the next version number (e.g., 0.1.0 â†’ 0.1.1)
2. Update version numbers in project files
3. Build the application for three architectures (Universal, ARM64, x86_64)
4. Create corresponding DMG installers
5. Publish to GitHub Releases with all DMG files attached

### License

MIT License - see [LICENSE](LICENSE) file for details

### Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

### Author

Gao Yang

### Support

If you encounter any issues or have suggestions, please [open an issue](https://github.com/echosoar/selecto/issues).
